How to run Hadoop To Venice Bridge from Azkaban.

Set up your own kafka Cluster and never use any of the clusters
deployed by Kafka team. Kafka clusters have 0.8 brokers and
the bridge uses 0.9 producer. This produces a message that
can't be understood by the older brokers and it breaks the mirror
maker.

There are 4 machines in Voldemort performance cluster which have
ports opened from Nertz Cluster.  Set up Kafka on one of these
ports and Venice controller on the other port.

All the 4 machines below have ports 6666, 6667 open from Nertz
eat1-app316.stg; eat1-app317.stg; eat1-app320.stg;eat1-app319.stg

Venice Cluster Setup

1) Set up ZooKeeper, Kafka Broker on the Staging machines.
Please note that unless explicitly opened, outbound connections from Azkaban are blocked.
As stated above, please set up the Venice Controller on one of the open ports
and Kafka on the other.

2) Bring up the Venice-controller and Venice-Server. If you use a different
machine port for the controller, please don't forget to update the job
properties to reflect the machine:port.

In my case, I brought up the
ZooKeeper on eat1-app316.stg:2181
venice-controller on eat1-app316.stg:6667
kafka broker on eat1-app316.stg:6666
Venice-Server on eat1-app316.stg:7072

I tweaked the following properties at the time of this writing.

File : ./venice-controller/config/controller.properties
Property : admin.port=6667

File : ./venice-server/config/cluster.properties
Property : kafka.bootstrap.servers=eat1-app316.stg.linkedin.com:6666

File : ./venice-client/config/config.properties
Property : kafka.bootstrap.servers=eat1-app316.stg.linkedin.com:6666

I also deleted the files under the directory ./venice-server/config/STORES/
as I was not interested in the default stores. You may choose to fix the
settings in that file or delete it.


Azkaban SetUp

1) Create the zip pack to be uploaded by running the following command
./gradlew clean hadoop-to-venice-bridge:zipAzkabanDev

2) The Zip Pack should be created here.
./hadoop-to-venice-bridge/build/distributions/hadoop-to-venice-bridge-0.1-azkaban-dev.zip

3) Open the Browser go to go/nertz, login to Azkaban

4) Click Projects tab, Select (if you have existing one) or Create a project ( if this is your first time).
Click permissions on the created project and add user voldtest as proxy users to this project.

5) Upload the zip file you have from the step 2.

6) Run the Azkaban job this should push the data to the Venice cluster.
